<section>Manage Shapes</section>
<processing-animation></processing-animation>
<span class="round-button" (click)="enableAddShapeDialog()">
  <img src="images/add.svg" /> Add</span>
<div>
  <form *ngFor="let sh of shapes;let id=index" class="main-form" [formGroup]="shapeForms[id].Group">

    <div class="form-header">
      <img src="images/shapes.svg" />{{sh.TopologyTypeName}}
    </div>
    <div [ngSwitch]="sh.TopologyTypeName" class="form-body container">
      <app-triangle2d *ngSwitchCase="'Tfsriangle2D'"></app-triangle2d>

      <div *ngSwitchDefault>
        <div *ngFor="let member of sh.TopologyType.Members" class="form-input  {{sh.TopologyTypeName.toLowerCase()}}">
          <div class="row-{{member.FieldName.toLowerCase()}}">
            <span class="col-label">
              {{member.LabelName}}:
            </span>
            <span class="col-value">
              <dynamic-input directiveType="{{member.DirectiveType}}" [mformComponent]="shapeForms[id].getFormComponent(member.FieldName)"></dynamic-input>
            </span>
          </div>
        </div>
      </div>


      <div [ngSwitch]="sh.RenderTypeName" class="render-container">
        <div *ngIf="sh.RenderTypeName !=''" class="render-title">
          Render: {{sh.RenderTypeName}}
        </div>
        <!-- <app-color-render2d *ngSwitchCase="'CyclicColor2D'" [mformComponent]="shapeForms[id].getFormComponent('RenderData')."></app-color-render2d> -->
        <div *ngSwitchCase="''"></div>
        <div *ngSwitchDefault>
          <div *ngFor="let member of sh.RenderType.Members" class="form-input  {{sh.RenderTypeName.toLowerCase()}}">
            <div class="row-{{member.DirectiveType.toLowerCase().replace(' ','-')}} {{member.DirectiveType.toLowerCase().startsWith('list') ? 'row-list' : ''}} ">
              <span class="col-label">
                {{member.LabelName}}:
              </span>
              <span class="col-value">
                <dynamic-input directiveType="{{member.DirectiveType}}" [mformComponent]="shapeForms[id].getFormComponent(member.FieldName)"></dynamic-input>
              </span>
            </div>
          </div>
        </div>

      </div>



      <div class="link-button float-right margin-top-20" (click)="addRender(sh)">
        <img src="images/add.svg" /> {{sh.RenderTypeName == '' ? 'Add Render' : 'Change Render'}}</div>
    </div>




  </form>
</div>


<app-modal title="Choose a Render" [show]="showRenderDialog" (close)="showRenderDialog=false" showButtons="false">
  <app-list-view [items]="rendersListView" [defaultImage]="'/images/shapes.svg'" (itemSelected)="renderSelected($event)"></app-list-view>
</app-modal>


<div class="modal" [class.show]="showAddShapeDialog" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" (click)="disableAddShapeDialog()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title">Add Shape</h4>
      </div>
      <div class="modal-body">
        <app-list-view [items]="shapesListView" [defaultImage]="'/src/images/shapes.svg'" (itemSelected)="createShape($event)"></app-list-view>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" (click)="disableAddShapeDialog()">Cancel</button>
        <button type="button" class="btn btn-primary">Ok</button>
      </div>
    </div>
    <!-- /.modal-content -->
  </div>
  <!-- /.modal-dialog -->
</div>
<!-- /.modal -->